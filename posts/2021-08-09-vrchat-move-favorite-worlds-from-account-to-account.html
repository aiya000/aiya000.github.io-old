<!-- htmlhint id-class-value:false / avoid the warnings to bootstrap names -->

<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
    <title>【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする - galaxy-sixth-sensey</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta property="og:url" content="https://aiya000.github.io" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする - galaxy-sixth-sensey" />
    <meta property="og:description" content="ギャラクシー・シックス・センスワイ - プログラミング・数学・一次創作" />
    <meta property="og:site_name" content="galaxy-sixth-sensey" />
    <meta property="og:image" content="https://aiya000.github.io/images/mu-icon.png" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@public_ai000ya" />
    <meta name="twitter:creator" content="@public_ai000ya">
    <meta name="twitter:title" content="galaxy-sixth-sensey - 【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする" />
    <meta name="twitter:description" content="ギャラクシー・シックス・センスワイ - プログラミング・数学・一次創作" />
    <meta name="twitter:image" content="https://aiya000.github.io/images/ogp-twitter-card-large.png" />
    <link rel="stylesheet" type="text/css" href="../node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../css/default.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.js/atom-one-dark.css" />
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="../">galaxy-sixth-sensey</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li>
            <a class="nav-link" href="../">Home</a>
          </li>
          <li>
            <a class="nav-link" href="../about.html">About</a>
          </li>
          <li>
            <a class="nav-link" href="../profile.html">Profile</a>
          </li>
          <li>
            <a class="nav-link" href="../products.html">Products</a>
          </li>
          <li>
            <a class="nav-link" href="../archive.html">Archive</a>
          </li>
        </ul>

        <div>
          <script async src="https://cse.google.com/cse.js?cx=005952339784006396697:rdanbqy7tbq"></script>
          <div class="gcse-search"></div>
        </div>
      </div>
    </nav>

    <link rel="stylesheet" type="text/css" href="../css/post.css" />

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <title>galaxy-sixth-sensey - 【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする</title>
    <meta property="og:url" content="https://aiya000.github.io/posts/2021-08-09-vrchat-move-favorite-worlds-from-account-to-account.html" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="galaxy-sixth-sensey - 【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする" />
    <meta property="og:description" content="【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする" />
    <meta property="og:site_name" content="galaxy-sixth-sensey" />
    <meta property="og:image" content="https://aiya000.github.io/images/mu-icon.png" />
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@public_ai000ya" />
    <meta name="twitter:creator" content="@public_ai000ya">
    <meta name="twitter:title" content="galaxy-sixth-sensey - 【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする" />
    <meta name="twitter:description" content="【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする" />
    <meta name="twitter:image" content="https://aiya000.github.io/images/mu-icon.png" />
</head>

<div class="post-info">
    <div class="post-date">2021/08/09</div>
    

    <div class="post-title">【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする</div>

    <ul class="post-tags">
        
            <li>
                <i class="fas fa-tag"></i>
                <a href="../tags/VRChat.html">VRChat</a>
            </li>
        
    </ul>
</div>

<div class="post-body">
    <p>VRChat APIを使うため、諸注意に留意してください :)</p>
<h1 id="結">結</h1>
<ul>
<li>これを使う: <a href="https://gist.github.com/8aadcec9833a530e32337601257f0f57">favorite.sh - GitHub Gist</a></li>
</ul>
<pre class="shell-session"><code>$ ./favorite.sh world_id_list.json worlds1 auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
This world is favorite:
  favoriteId: wrld_6c828572-43da-49cd-b320-ef799438d189
  tags: [&quot;worlds2&quot;]
Skip this world:
  favoriteId: wrld_c710e8be-2e4b-407c-869e-0c3d5a3786e1
  error message: &quot;world not found&quot;
This world is favorite:
  favoriteId: wrld_d6dae663-d775-4967-9f59-1a47b48df247
  tags: [&quot;worlds2&quot;]

...</code></pre>
<p>これは完全なプログラムではないので、使用する前に下記の手順で補完する必要があります。</p>
<p>（プログラムはMITライセンスで配布しているので、改良してくれてもいいのよ＞＜）</p>
<h1 id="準備">準備</h1>
<ol type="1">
<li><code>apiKey</code>を取得: https://vrchatapi.github.io/#/GettingStarted/QuickStart?id=client-api-key</li>
</ol>
<pre class="shell-session"><code>$ apiKey=$(curl https://api.vrchat.cloud/api/1/config | jq '.apiKey')</code></pre>
<ol start="2" type="1">
<li>下記にも設定してください（下記の値は現在のもの）</li>
</ol>
<pre class="shell-sessoin"><code>$ cat favorite.sh | head -3
#!/bin/bash

apiKey=JlE5Jldo5Jibnk5O5hTx6XVqsJu4WJ26</code></pre>
<h2 id="コピー元アカウント側の準備">コピー元アカウント側の準備</h2>
<ol type="1">
<li>いつもの（<a href="#2fa">2FAを使っている場合はこちらから</a>）</li>
</ol>
<pre class="shell-session"><code>$ echo -n 'your_old_vrchat_account_id:password' | base64
XXXXXXXXXXXXXXXX=

$ auth_plain='XXXXXXXXXXXXXXXX='</code></pre>
<ol start="2" type="1">
<li><code>authcookie</code>を取得: <code>auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code>の部分をコピーしておく</li>
</ol>
<pre class="shell-session"><code>$ curl --verbose \
    'https://api.vrchat.cloud/api/1/auth/user?apiKey=$apiKey' \
    -H &quot;Authorization: Basic $auth_plain&quot; 2&gt;&amp;1 \
    | grep 'auth=authcookie_'
&lt; set-cookie: auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX; Max-Age=604800; Path=/; Expires=Mon, 16 Aug 2021 07:33:02 GMT; HttpOnly

$ auth_cookie='auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX'</code></pre>
<hr />
<p><a name="2fa"></a></p>
<p>2FAを使っている場合は、かわりにこちらを実行します</p>
<pre class="shell-session"><code>$ otp={2FAアプリから取得}
$ curl -X POST \
  'https://api.vrchat.cloud/api/1/auth/twofactorauth/totp/verify' \
    -H &quot;Authorization: Basic $auth_plain&quot; \
    -d &quot;code=$otp&quot; \
    2&gt;&amp;1 \
    | grep 'auth=authcookie_'
&lt; set-cookie: auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX; Max-Age=604800; Path=/; Expires=Mon, 16 Aug 2021 07:33:02 GMT; HttpOnly

$ auth_cookie='auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX'</code></pre>
<hr />
<ol start="3" type="1">
<li>favorite済みワールドの取得</li>
</ol>
<p><code>n=100</code>は重要なので、省略しないでね！</p>
<p>（デフォルトだと20個くらいの取得になってしまう）</p>
<p>（<a href="https://vrchatapi.github.io/#/FavoritesAPI/ListAllFavorites"><strong>100が上限なので、100以上のワールドfavoriteがある場合はできない……？</strong></a>）</p>
<pre class="shell-session"><code>$ curl &quot;https://api.vrchat.cloud/api/1/favorites?apiKey=$apiKey&amp;type=world&amp;n=100&quot; \
    -b &quot;$auth_cookie&quot; \
    &gt; favorites.json

$ cat favorites.json | jq '.[].favoriteId' | tee worlds.json
&quot;wrld_7a88c811-7a97-4fcc-ad83-d295e5f177c1&quot;
&quot;wrld_72fab76b-651d-443d-87d7-326c4e8528a0&quot;
...</code></pre>
<p>必要に応じて、favorite枠ごとにjsonを分割してください<br />
分割した場合は、下記の<code>worlds1.json</code>のようなファイルを、以降の<code>worlds.json</code>と同じように処理してください</p>
<pre class="shell-session"><code>$ cat favorites.json | jq '.[] | select(.tags[] | contains(&quot;worlds1&quot;))' | worlds1.json</code></pre>
<p>jqわかんないので、手動でjsonの形に直します<br />
ここのやり方わかる人、この記事にPRください！</p>
<pre class="shell-session"><code>$ $EDITOR worlds.json
$ cat worlds.json
[
  &quot;wrld_7a88c811-7a97-4fcc-ad83-d295e5f177c1&quot;,
  ...
  &quot;wrld_72fab76b-651d-443d-87d7-326c4e8528a0&quot;
]</code></pre>
<h2 id="コピー先アカウント側の準備">コピー先アカウント側の準備</h2>
<ol type="1">
<li>上記「いつもの」と同じ（<a href="#2fa">2FAを使っている場合は同じくこちら</a>）</li>
</ol>
<pre class="shell-session"><code>$ echo -n 'your_new_vrchat_account_id:password' | base64
XXXXXXXXXXXXXXXX=

$ auth_plain=$(echo -n 'your_new_vrchat_account_id:password' | base64)</code></pre>
<ol start="2" type="1">
<li><code>authcookie</code>を取得: <code>auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code>の部分をコピーしておく</li>
</ol>
<pre class="shell-session"><code>$ curl --verbose \
    'https://api.vrchat.cloud/api/1/auth/user?apiKey=$apiKey' \
    -H &quot;Authorization: Basic $auth_plain&quot; 2&gt;&amp;1 \
    | grep 'auth=authcookie_'
&lt; set-cookie: auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX; Max-Age=604800; Path=/; Expires=Mon, 16 Aug 2021 07:33:02 GMT; HttpOnly

$ auth_cookie='auth=authcookie_XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX'</code></pre>
<ol start="3" type="1">
<li>実際にfavoriteに登録する</li>
</ol>
<p>とうとうやるぞ！！</p>
<p>favorite枠が通常は64個なのに気を付けて、切り分けておきます</p>
<p>例えば今favorite枠<code>worlds1</code>が24つのみ余っている場合は分割しておきます</p>
<pre class="shell-session"><code>$ jq '.[:24]' &lt; worlds.json &gt; part.json</code></pre>
<p>ちゅーこってやっとこれです<br />
<a href="https://gist.github.com/8aadcec9833a530e32337601257f0f57">‘favorite.sh - GitHub Gist’</a>をダウンロードしてきてね&gt;&lt;</p>
<p>VRChatアカウントのBANを回避するために、1分に1つのワールドを処理します<br />
お茶を飲んでまってましょう <span class="emoji" data-emoji="tea">🍵</span></p>
<pre class="shell-session"><code>$ ./favorite.sh part.json worlds1 &quot;$auth_cookie&quot;</code></pre>
<p>これが終わって、お茶も飲み終わったなら、残りも処理しちゃいましょう</p>
<pre class="shell-session"><code># worlds2が35枠余ってる
$ jq &quot;.[24:$((24 + 35))]&quot; &lt; worlds.json &gt; part2.json
$ ./favorite.sh part2.json worlds2 &quot;$auth_cookie&quot;

# worlds3の枠がいっぱい余ってる
$ jq &quot;.[$((24 + 35)):]&quot; &lt; worlds.json &gt; part3.json
$ ./favorite.sh part3.json worlds3 &quot;$auth_cookie&quot;</code></pre>
<h1 id="おわり">おわり</h1>
<p>おわり</p>

    <hr />

    <ul class="bookmarkers">
        <li> <!-- See https://about.twitter.com/ja/resources/buttons -->
            <a href="https://twitter.com/share" class="twitter-share-button" data-via="public_ai000ya" data-size="small">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </li>

        <li> <!-- See http://b.hatena.ne.jp/guide/bbutton -->
            <a href="http://b.hatena.ne.jp/entry/aiya000.github.io/posts/2021-08-09-vrchat-move-favorite-worlds-from-account-to-account.html" class="hatena-bookmark-button" data-hatena-bookmark-title="【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする - あいや☆ぱぶりっしゅぶろぐ！" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
            <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
        </li>

        <li> <!-- See https://developers.facebook.com/docs/plugins/like-button?locale=ja_JP#configurator -->
            <div class="fb-like" data-href="https://aiya000.github.io/posts/2021-08-09-vrchat-move-favorite-worlds-from-account-to-account.html" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></div>
        </li>

        <li> <!-- See https://getpocket.com/publisher/button -->
            <a data-pocket-label="pocket" data-pocket-count="horizontal" class="pocket-btn" data-lang="ja"></a>
            <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
        </li>
    </ul>

    <p class="about-pr">
        この記事はこちらから修正リクエストを送ることができます。 <br />
        <a href="https://github.com/aiya000/aiya000.github.io/blob/src/posts/2021-08-09-vrchat-move-favorite-worlds-from-account-to-account.md">【VRChat API】別のアカウントでfavoriteしたワールド（アカウント）を別のアカウントにコピーする - github</a> <br />
        ゴミ箱ボタンの左にある、鉛筆ボタンを押してね！
    </p>
</div>

<script src="../js/facebook-sdk-2.8.js"></script>


    <div class="footer">
      (*^o^) { This blog powerd by Haskell <a href="http://jaspervdj.be/hakyll">Hakyll</a>,
      and more (<a href="../licenses.html">about licenses</a>).
    </div>

    <script type="text/javascript" src="../node_modules/jquery/dist/jquery.slim.min.js"></script>
    <script type="text/javascript" src="../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="../js/fontawesome-all.min.js"></script>
    <script type="text/javascript" src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
