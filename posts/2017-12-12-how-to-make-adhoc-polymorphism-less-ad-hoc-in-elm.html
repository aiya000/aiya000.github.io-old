<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>ã‚ã„ã‚„â˜†ã±ã¶ã‚Šã£ã—ã‚…ã¶ã‚ãï¼ - How to make type classes without implicit caller in Elm</title>
        <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
        <!-- bootstrap requires jquery -->
        <script type="text/javascript" src="../js/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default">
            <div class="navbar-header">
                <a class="navbar-brand" href="../">ã‚ã„ã‚„â˜†ã±ã¶ã‚Šã£ã—ã‚…ã¶ã‚ãï¼</a>
            </div>
            <ul class="nav navbar-nav">
                <li><a href="../">Home</a></li>
                <li><a href="../about.html">About</a></li>
                <li><a href="../profile.html">Profile</a></li>
                <li><a href="../products.html">Products</a></li>
                <li><a href="../archive.html">Archive</a></li>
            </ul>
        </nav>

        <div id="content">
            <h4>How to make type classes without implicit caller in Elm</h4>
            <link rel="stylesheet" type="text/css" href="../css/post.css" />

<div class="info">
    Posted on 2017/12/12 <br />
    

    Tags:
    
        [<a href="../tags/Elm.html">Elm</a>]
    
        [<a href="../tags/AdventCalendar2017.html">AdventCalendar2017</a>]
    
        [<a href="../tags/AdventCalendar.html">AdventCalendar</a>]
    

    <ul class="bookmarkers">
        <li> <!-- See https://about.twitter.com/ja/resources/buttons -->
            <a href="https://twitter.com/share" class="twitter-share-button" data-via="public_ai000ya" data-size="small">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </li>

        <li> <!-- See http://b.hatena.ne.jp/guide/bbutton -->
            <a href="http://b.hatena.ne.jp/entry/aiya000.github.io/posts/2017-12-12-how-to-make-adhoc-polymorphism-less-ad-hoc-in-elm.html" class="hatena-bookmark-button" data-hatena-bookmark-title="How to make type classes without implicit caller in Elm - ã‚ã„ã‚„â˜†ã±ã¶ã‚Šã£ã—ã‚…ã¶ã‚ãï¼" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ "><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" /></a>
            <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
        </li>

        <li> <!-- See https://developers.facebook.com/docs/plugins/like-button?locale=ja_JP#configurator -->
            <div class="fb-like" data-href="https://aiya000.github.io/posts/2017-12-12-how-to-make-adhoc-polymorphism-less-ad-hoc-in-elm.html" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></div>
        </li>

        <li> <!-- See https://getpocket.com/publisher/button -->
            <a data-pocket-label="pocket" data-pocket-count="horizontal" class="pocket-btn" data-lang="ja"></a>
            <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
        </li>
    </ul>
</div>

<hr />

<h1 id="è«¸æ³¨æ„">è«¸æ³¨æ„</h1>
<p>ã€€å®Ÿæ¡ˆä»¶ã§æœ¬ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„ã€ç‰¹ãŒã‚ã‚Šã¾ã›ã‚“ï¼</p>
<hr />
<p class="dodon">
How to make and use type classes without implicit caller in Elm
</p>
<p class="dodon" style="text-align: center">
- ä¾µç•¥è€… -
</p>
<hr />
<h1 id="æœ¬è¨˜äº‹ã¯">æœ¬è¨˜äº‹ã¯</h1>
<p>ã€€Elm Advent Calendar 2017ã®12æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼</p>
<ul>
<li><a href="https://qiita.com/advent-calendar/2017/elm">Elm Advent Calendar 2017 - Qiita</a></li>
</ul>
<h1 id="elmã¸ã®å‹ã‚¯ãƒ©ã‚¹ã®å°å…¥">Elmã¸ã®å‹ã‚¯ãƒ©ã‚¹ã®å°å…¥</h1>
<p>ã€€ã“ã®è¨˜äº‹ã§ã¯ã€Philip Wadlerã®è«–æ–‡ã€ŒHow to make ad-hoc polymorphism less ad hocã€ ã«ã¦ç¤ºã•ã‚Œã‚‹å‹ã‚¯ãƒ©ã‚¹ã®å°å…¥ã‚’å…ƒã«ã—ãŸã€Elmã«å‹ã‚¯ãƒ©ã‚¹ã®å°å…¥ã‚’è¡Œã†ãŸã‚ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ç¤ºã—ã¾ã™ã€‚</p>
<ul>
<li><a href="https://www.google.co.jp/search?q=philip+wadler+how+to+make+ad-hoc+polymorphism&amp;ie=utf-8&amp;oe=utf-8&amp;client=firefox-b&amp;gfe_rd=cr&amp;dcr=0&amp;ei=YbIOWq34J5KL8QeCm6GQAw">How to make ad-hoc polymorphism less ad hoc</a></li>
</ul>
<p>ã€€å…ƒæ–‡ã§ã¯</p>
<p>ã€€åŸºæœ¬çš„ã«è¡¨ç¾ã¯å…ƒã®è«–æ–‡ã«æº–æ‹ ã—ã¤ã¤ã€ ã‹ã¤ä¿®æ­£ãŒè¦‹è¾¼ã‚ã‚‹å ´åˆã¯ç¾ä»£çš„ãªè¡¨ç¾ã‚’ç”¨ã„ã¾ã™ã€‚</p>
<h1 id="æœ¬é¡Œ-å˜ç´”ãªå‹ã‚¯ãƒ©ã‚¹ã®å°å…¥">æœ¬é¡Œ: å˜ç´”ãªå‹ã‚¯ãƒ©ã‚¹ã®å°å…¥</h1>
<h2 id="ã‚¹ãƒ†ãƒƒãƒ—1-numå‹ã‚¯ãƒ©ã‚¹ã®å®šç¾©">ã‚¹ãƒ†ãƒƒãƒ—1: Numå‹ã‚¯ãƒ©ã‚¹ã®å®šç¾©</h2>
<p>ã€€ä¾‹ã¨ã—ã¦<code>Num</code>å‹ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã‚’è¡Œã„ã¾ã™ã€‚</p>
<pre class="elm"><code>type NumD a = NumDict
  { add : a -&gt; a -&gt; a -- (+)ã®ä»£ã‚ã‚Š
  , mul : a -&gt; a -&gt; a -- (*)ã®ä»£ã‚ã‚Š
  , neg : a -&gt; a      -- negateã®ä»£ã‚ã‚Š
  }

add : NumD a -&gt; (a -&gt; a -&gt; a)
add (NumDict {add}) = add

mul : NumD a -&gt; (a -&gt; a -&gt; a)
mul (NumDict {mul}) = mul

neg : NumD a -&gt; (a -&gt; a)
neg (NumDict {neg}) = neg</code></pre>
<p>ã¾ãŸã€ã“ã“ã®å„ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯<code>Basics</code>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã®å‘½åè¡çªã‚’é¿ã‘ãŸå‘½åãŒãªã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
<p>ã€€ä»¥ä¸‹ã¯Haskellã®Numå‹ã‚¯ãƒ©ã‚¹ã§ã™ã€‚</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">class</span> <span class="dt">Num</span> a <span class="kw">where</span>
<span class="ot">  add ::</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a <span class="co">-- æœ¬æ¥ã¯(+)</span>
<span class="ot">  mul ::</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a <span class="co">-- æœ¬æ¥ã¯(*)</span>
<span class="ot">  neg ::</span> a <span class="ot">-&gt;</span> a      <span class="co">-- æœ¬æ¥ã¯negate</span>

<span class="co">-- add :: Num a =&gt; a -&gt; a -&gt; a</span>
<span class="co">-- mul :: Num a =&gt; a -&gt; a -&gt; a</span>
<span class="co">-- neg :: Num a =&gt; a -&gt; a -&gt; a</span></code></pre></div>
<p>ã€€ã“ã“ã§<code>NumD</code>å‹ = <code>Num</code>å‹ã‚¯ãƒ©ã‚¹ã¨ã¿ãªã—ã¾ã™ã€‚</p>
<p>ã€€æœ¬è¨˜äº‹ã§ã¯ã€å‹ã‚¯ãƒ©ã‚¹ã¨ãªã‚‹å‹åã«ã¯<code>D</code>ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ã€ ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å®šç¾©ï¼ˆå¾Œè¿°ï¼‰ã«ç”¨ã„ã‚‰ã‚Œã‚‹å€¤æ§‹ç¯‰å­ã«ã¯<code>Dict</code>ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è² è·ã—ã¾ã™ã€‚</p>
<h2 id="ã‚¹ãƒ†ãƒƒãƒ—2-numã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å®šç¾©">ã‚¹ãƒ†ãƒƒãƒ—2: Numã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å®šç¾©</h2>
<pre class="elm"><code>{-| Intã®Numã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å®šç¾© -}
numDInt : NumD Int
numDInt = NumDict
  { add = (+)
  , mul = (*)
  , neg = negate
  }

{-| Floatã®Numã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å®šç¾© -}
numDFloat : NumD Float
numDFloat = NumDict
  { add = (+)
  , mul = (*)
  , neg = negate
  }</code></pre>
<p>ã€€ã“ã‚Œã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å®šç¾©ã¯å®Œäº†ã§ã™ã€‚</p>
<p>ã€€<code>Int</code>åŠã³<code>Float</code>ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã€<code>add</code>, <code>mul</code>, <code>neg</code>é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã¿ã¾ã™ã€‚</p>
<pre class="elm"><code>&gt; add numDInt 1 2
3 : Int
&gt; mul numDFloat 3.0 3.0
9.0 : Float
&gt; neg numDFloat 3.0
3.0 : Float
&gt; add numDInt 1 2.0
ï¼ˆInt and Floatã®ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ãƒãƒƒãƒã‚¨ãƒ©ãƒ¼ï¼ï¼‰</code></pre>
<p>Good!</p>
<p class="kosokoso">
â€¦ã“ã‚Œã€å®Ÿéš›ã¯REPLã§å®Ÿè¡Œã—ã¦ã„ãªãã¦ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã‹ã‚‰ä¼¼ãŸã‚ˆã†ãªå‹•ä½œç¢ºèªã—ã¦ã¾ã™â€¦ã€‚ elm-replã¯ãªãœã€ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚’å®Ÿè£…ã—ã¦ãã‚Œãªã„ã®ï¼Ÿ
</p>
<h3 id="ã‚¹ãƒ†ãƒƒãƒ—2.5-numå‹ã‚¯ãƒ©ã‚¹åˆ¶ç´„ã®ã‚ã‚‹é–¢æ•°ã‚’å®Ÿè£…ã™ã‚‹">ã‚¹ãƒ†ãƒƒãƒ—2.5: Numå‹ã‚¯ãƒ©ã‚¹åˆ¶ç´„ã®ã‚ã‚‹é–¢æ•°ã‚’å®Ÿè£…ã™ã‚‹</h3>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">square ::</span> <span class="dt">Num</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a
square x <span class="fu">=</span> mul x x
<span class="co">-- x * x</span></code></pre></div>
<p>ã“ã®Haskellã‚³ãƒ¼ãƒ‰ã¨åŒã˜å†…å®¹ã‚’ã€æœ¬ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®Elmã§å®Ÿè£…ã—ã¾ã™ã€‚</p>
<pre class="elm"><code>square : NumD a -&gt; a -&gt; a
square numDa x = mul numDa x x</code></pre>
<h2 id="ã‚¹ãƒ†ãƒƒãƒ—3-æ·±ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã™ã‚‹">ã‚¹ãƒ†ãƒƒãƒ—3: æ·±ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã™ã‚‹</h2>
<p>ã€€ã“ã“ã§ã®ã€Œæ·±ã„ã€ã¨ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å‹åˆ¶ç´„ã‚’æŒã¡ã€ ã‹ã¤æŠ½è±¡å‹ï¼ˆå…·ä½“å‹ã§ãªã„å‹ï¼‰ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚</p>
<p>ï¼ˆã¤ã¾ã‚ŠHaskellçš„æ„å‘³åˆã„ã§ã€ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒundecidable instanceã§ã‚ã‚‹ã“ã¨ï¼‰</p>
<pre class="elm"><code>numDPair : (NumD a, NumD b) -&gt; NumD (a, b)
numDPair numDab =
  let
    addPair : (NumD a, NumD b) -&gt; (a, b) -&gt; (a, b) -&gt; (a, b)
    addPair (numDa, numDb) (x1, y1) (x2, y2) = (add numDa x1 x2, add numDb y1 y2)
    mulPair : (NumD a, NumD b) -&gt; (a, b) -&gt; (a, b) -&gt; (a, b)
    mulPair (numDa, numDb) (x1, y1) (x2, y2) = (mul numDa x1 x2, mul numDb y1 y2)
    negPair : (NumD a, NumD b) -&gt; (a, b) -&gt; (a, b)
    negPair (numDa, numDb) (x, y) = (neg numDa x, neg numDb y)
  in NumDict
      { add = addPair numDab
      , mul = mulPair numDab
      , neg = negPair numDab
      }</code></pre>
<p>ã“ã‚Œã¯ä»¥ä¸‹ã®Haskellã‚³ãƒ¼ãƒ‰ã¨åŒç­‰ã§ã™ã€‚</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> (<span class="dt">Num</span> a, <span class="dt">Num</span> b) <span class="ot">=&gt;</span> <span class="dt">Num</span> (a, b) <span class="kw">where</span>
  add <span class="fu">=</span> addPair
    <span class="kw">where</span>
<span class="ot">      addPair ::</span> (<span class="dt">Num</span> a, <span class="dt">Num</span> b) <span class="ot">=&gt;</span> (a, b) <span class="ot">-&gt;</span> (a, b) <span class="ot">-&gt;</span> (a, b)
      addPair (x1, y1) (x2, y2) <span class="fu">=</span> (add x1 x2, add y1 y2)
  mul <span class="fu">=</span> mulPair
    <span class="kw">where</span>
<span class="ot">      mulPair ::</span> (<span class="dt">Num</span> a, <span class="dt">Num</span> b) <span class="ot">=&gt;</span> (a, b) <span class="ot">-&gt;</span> (a, b) <span class="ot">-&gt;</span> (a, b)
      mulPair (x1, y1) (x2, y2) <span class="fu">=</span> (mul x1 x2, mul y1 y2)
  neg <span class="fu">=</span> negPair
    <span class="kw">where</span>
<span class="ot">      negPair ::</span> (<span class="dt">Num</span> a, <span class="dt">Num</span> b) <span class="ot">=&gt;</span> (a, b) <span class="ot">-&gt;</span> (a, b)
      negPair (x, y) <span class="fu">=</span> (neg x, neg y)</code></pre></div>
<p>â€¦</p>
<pre class="elm"><code>&gt; add (numDPair (numDInt, numDFloat)) (1, 2.0) (3, 4.0)
(4,6.699999999999999)</code></pre>
<p>ğŸ’  OK! ğŸ’ </p>
<h2 id="ã‚¹ãƒ†ãƒƒãƒ—x-ã¾ã¨ã‚">ã‚¹ãƒ†ãƒƒãƒ—X: ã¾ã¨ã‚</h2>
<p>ã€€ã¾ã¨ã‚ã¨ã—ã¦ã€å‹å®‰å…¨ãªå€¤ã®æ¯”è¼ƒã‚’ã™ã‚‹é–¢æ•°<code>eq</code>ã‚’æŒã¤å‹ã‚¯ãƒ©ã‚¹<code>Eq</code>ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<pre class="elm"><code>import List

{-|
class Eq a where
  eq :: a -&gt; a -&gt; Bool
-}
type EqD a = EqDict
  { eq : a -&gt; a -&gt; Bool
  }

{-|
eq :: Eq a =&gt; a -&gt; a -&gt; Bool
-}
eq : EqD a -&gt; a -&gt; a -&gt; Bool
eq (EqDict {eq}) = eq

{-|
instance Eq Int where
  eq = (==)
-}
eqDInt : EqD Int
eqDInt = EqDict
  { eq = (==)
  }

{-|
instance Eq a =&gt; Eq (List a) where
  eq xs ys = zipWith eq xs ys &amp; List.all id
-}
eqDList : EqD a -&gt; EqD (List a)
eqDList eqDa =
  let
    eqList : EqD a -&gt; List a -&gt; List a -&gt; Bool
    eqList eqDa xs ys = List.map2 (eq eqDa) xs ys |&gt; List.all identity
  in EqDict
      { eq = eqList eqDa
      }

member : EqD a -&gt; List a -&gt; a -&gt; Bool
member eqDa xs y = case xs of
  []      -&gt; False
  (x::xs) -&gt; eq eqDa x y || member eqDa xs y</code></pre>
<pre class="elm"><code>&gt; eq eqDInt 1 1
True
&gt; eq (eqDList eqDInt) [1, 1] [1, 2]
False
&gt; eq (eqDList (eqDList eqDInt)) [[10], [1, 2]] [[10], [1, 2]]
True
&gt; member eqDInt [1, 2, 3] 2
True</code></pre>
<h1 id="è¤‡æ•°ã®å‹åˆ¶ç´„ã‚’å—ã‘å–ã‚‹">è¤‡æ•°ã®å‹åˆ¶ç´„ã‚’å—ã‘å–ã‚‹</h1>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">memsq ::</span> (<span class="dt">Eq</span> a, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></code></pre></div>
<p>ã€€ã“ã®ã‚ˆã†ãª2ã¤ä»¥ä¸Šã®å‹åˆ¶ç´„ï¼ˆaã«å¯¾ã™ã‚‹<code>(Eq a, Num a)</code>ï¼‰ã‚’æŒã¤å ´åˆã¯ã€å˜ç´”ã«</p>
<pre class="elm"><code>memsq : (EqD a, NumD a) -&gt; List a -&gt; a -&gt; Bool
memsq (eqDa, numDa) xs y = member eqDa xs (square numDa y)</code></pre>
<p>ã®ã‚ˆã†ã«ã—ã¦ã‚ã’ã‚‹ã¨ã‚ˆã„ã§ã™ã€‚</p>
<pre class="elm"><code>&gt; memsq (eqDInt, numDInt) [1, 3, 5, 7, 9] 3
True</code></pre>
<hr />
<p>ï¼ˆæœ¬ç« ã®ä»¥ä¸‹ã¯ä½™è«‡ã§ã™ï¼‰</p>
<p>ã€€ã‚‚ã—ã‹ã—ãŸã‚‰ã€å…ƒè«–æ–‡ã‚’èª­ã‚“ã äººãŒæœ¬ç« ã‚’èª­ã‚“ã ã¨ãã«ã€é•å’Œæ„Ÿã‚’æ„Ÿã˜ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ ã¨ã„ã†ã®ã‚‚ã€ã“ã“ã§ã¯å…ƒè«–æ–‡ã®ã“ã‚Œã«ã¤ã„ã¦ã®å†…å®¹ã‚’çœç•¥ã—ã¦ã„ã‚‹ã“ã¨ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚</p>
<p>ã€€å…ƒè«–æ–‡ã§ã¯ã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢æ•°</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">memsq ::</span> (<span class="dt">Eq</span> a, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></code></pre></div>
<p>ã®åˆ¶ç´„<code>(Eq a, Num a)</code>ã‚’ä»Šã¾ã§ã®ãƒ«ãƒ¼ãƒ«ã«è¼‰ã›ã‚‹ã«ã¯ ã€Œ<code>Eq a</code>ã‚‚ã—ãã¯<code>Num a</code>ã®ã‚¯ãƒ©ã‚¹å®£è¨€ã§ã€ã©ã¡ã‚‰ã‹ã‚’ã©ã¡ã‚‰ã‹ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã«ã™ã‚‹ã¨ã„ã„ã€ ã¨ã€‚</p>
<p>ã¤ã¾ã‚Š<code>Eq</code>å‹ã‚¯ãƒ©ã‚¹ã‚’</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">class</span> <span class="dt">Num</span> a <span class="ot">=&gt;</span> <span class="dt">Eq</span> a <span class="kw">where</span> <span class="fu">...</span>

<span class="ot">memsq ::</span> <span class="dt">Eq</span> a <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></code></pre></div>
<p>ã¨æ”¹å¤‰ã™ã‚‹ã‹ ï¼ˆãŠãã‚‰ãã“ã®ã€Œæ”¹å¤‰ã€ã¯ãƒ—ãƒªãƒ—ãƒ­ã‚»ã‚¹æ™‚ã‚ãŸã‚Šã‚’ä»®å®šã—ã¦ã„ã‚‹ï¼‰</p>
<p>ã‚‚ã—ãã¯</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">class</span> <span class="dt">Eq</span> a <span class="ot">=&gt;</span> <span class="dt">Num</span> a <span class="kw">where</span> <span class="fu">...</span>

<span class="ot">memsq ::</span> <span class="dt">Num</span> a <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></code></pre></div>
<p>ã¨ã™ã‚‹ã¨ã‚ˆã„ã€‚</p>
<p>ã¨æ›¸ã„ã¦ã‚ã‚‹æ€ã†ã®ã§ã™ãŒã€ æœ¬ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ãã‚Œã‚‚å¿…è¦ãªã„ã®ã§ã€ã°ã£ã•ã‚Šçœç•¥ã—ã¦ã„ã¾ã™ã€‚</p>
<h1 id="çµ‚ç« -è¤‡æ•°ã®å¼•æ•°ã‚’æŒã¤å‹ã‚¯ãƒ©ã‚¹multi-param-type-class">çµ‚ç« : è¤‡æ•°ã®å¼•æ•°ã‚’æŒã¤å‹ã‚¯ãƒ©ã‚¹ï¼ˆmulti param type classï¼‰</h1>
<p>ã€€è¤‡æ•°ã®å¼•æ•°ï¼ˆå®Ÿè£…ã®å¯¾è±¡ï¼‰ã‚’æŒã¤å‹ã‚¯ãƒ©ã‚¹ï¼ˆmulti param type classï¼‰ ã‚’å®Ÿè£…ã§ãã‚‹ã“ã¨ã‚’ç¤ºã—ã€ã“ã‚Œã§ç· ã‚ã¨ã—ã¾ã™ã€‚</p>
<p>ï¼ˆã€Œç¤ºã™ã€ã ã‘ã«ã€Œç· ã‚ã€ã¨ã„ã†ã“ã¨ã§ï¼‰</p>
<p>ä¾‹ã¨ã—ã¦ã€<code>a</code>ã‹ã‚‰<code>b</code>ã¸ã®å¤‰æ›ãŒã§ãã‚‹ã“ã¨ã‚’è¡¨ã™å‹ã‚¯ãƒ©ã‚¹<code>Coerce</code>ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>
<pre class="elm"><code>type CoerceD a b = CoerceDict
  { coerce : a -&gt; b
  }

coerce : CoerceD a b -&gt; a -&gt; b
coerce (CoerceDict {coerce}) = coerce

coerceDIntFloat : CoerceD Int Float
coerceDIntFloat = CoerceDict
  { coerce = toFloat
  }</code></pre>
<h1 id="è£œè¶³">è£œè¶³</h1>
<p>ã€€æœ¬è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã«ä»˜ã‘ãŸ â€˜without implicit callerâ€™ ã®æ„ã§ã™ãŒã€ æœ¬ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ã”è¦§ã®é€šã‚Šã€å‹ã‚¯ãƒ©ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¡¨ã™å€¤ã‚’ é–¢æ•°å‘¼ã³å‡ºã—æ™‚ã«çœç•¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚</p>
<p>e.g.Â ã“ã“ã®<code>eqDInt</code></p>
<pre class="elm"><code>--   vvvvvv
&gt; eq eqDInt 1 1
True</code></pre>
<p>ï¼ˆä¾‹ãˆã°Scalaã¯ã“ã‚Œã‚’<code>implicit</code>ã§ã†ã¾ã„ã“ã¨è§£æ±ºã—ã¦ã„ã‚‹ã¨æ€ã†ï¼‰</p>
<h1 id="çµ‚ã‚ã‚Šã«">çµ‚ã‚ã‚Šã«</h1>
<p>ã€€ã“ã®è¨˜äº‹ã¯ã€å®Ÿéš›ãƒã‚¿æ ã§ã™ã€‚ ç¾å®Ÿçš„ã«ã¯ã€æ§‹é€ çš„éƒ¨åˆ†å‹ã¨ã‹ã‚‚ã£ã¨å˜ç›¸çš„ã«ã‚„ã‚‹ã¨ã‹ã®æ–¹ãŒã„ã„ã¨æ€ã„ã¾ã™ã€‚</p>

<hr />
<hr />

<p class="about-pr">
ã“ã®è¨˜äº‹ã¯ã“ã¡ã‚‰ã‹ã‚‰ä¿®æ­£ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ <br />
<a href="https://github.com/aiya000/aiya000.github.io/blob/src/posts/2017-12-12-how-to-make-adhoc-polymorphism-less-ad-hoc-in-elm.md">How to make type classes without implicit caller in Elm - github</a> <br />
ã‚´ãƒŸç®±ãƒœã‚¿ãƒ³ã®å·¦ã«ã‚ã‚‹ã€é‰›ç­†ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã­ï¼
</p>

<script src="../js/facebook-sdk-2.8.js"></script>

        </div>

        <div id="footer">
            (*^o^) { This blog powerd by Haskell <a href="http://jaspervdj.be/hakyll">Hakyll</a> <br />
            and Uses <a href="http://nkmr6194.github.io/Umi/">Umi</a>
        </div>
    </body>
</html>
